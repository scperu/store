<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Demo Productos Dinámicos con Stock Simplificado</title>
<style>
:root {
  --pri1: #e63946;
  --pri2: #ff9f1c;
  --ok: #22c55e;
  --warn: #f59e0b;
  --danger: #ef4444;
  --text: #111827;
  --shadow-sm: 0 2px 10px rgba(0,0,0,.05);
}

body {
  font-family: Arial, sans-serif;
  background: #f8fafc;
  padding: 20px;
}

.products {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 20px;
}

.card {
  background: #fff;
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--shadow-sm);
  text-align: center;
}

.card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 10px;
}

.card h3 {
  margin: 10px 0 5px;
}

.product-stats {
  font-size: 0.85em;
  color: var(--text);
  margin-top: 8px;
  background: #f9fafb;
  padding: 10px 12px;
  border-radius: 10px;
  box-shadow: var(--shadow-sm);
}
.product-stats p {
  margin: 5px 0;
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 500;
  opacity: 0;
  transform: translateY(8px);
  animation: fadeInUp 0.6s forwards;
}
.product-stats svg {
  flex-shrink: 0;
}
.product-stats .num {
  color: var(--pri1);
  font-weight: 700;
  animation: pulseNum 1.6s infinite;
  transition: color 0.3s, transform 0.3s;
}
.product-stats .num.cambio {
  color: var(--ok);
  transform: scale(1.3);
}
@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes pulseNum {
  0%   { transform: scale(1); color: var(--pri1); }
  50%  { transform: scale(1.15); color: var(--pri2); }
  100% { transform: scale(1); color: var(--pri1); }
}
</style>
</head>
<body>

<h1>Demo Tienda con Stock + Frases Sociales</h1>
<div class="products">
  <div class="card" data-stock="12">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+1" alt="Producto 1">
    <h3>Producto 1</h3>
    <p>Descripción breve del producto 1.</p>
  </div>
  <div class="card" data-stock="5">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+2" alt="Producto 2">
    <h3>Producto 2</h3>
    <p>Descripción breve del producto 2.</p>
  </div>
  <div class="card" data-stock="0">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+3" alt="Producto 3">
    <h3>Producto 3</h3>
    <p>Descripción breve del producto 3.</p>
  </div>
  <div class="card" data-stock="32">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+4" alt="Producto 4">
    <h3>Producto 4</h3>
    <p>Descripción breve del producto 4.</p>
  </div>
  <div class="card" data-stock="7">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+5" alt="Producto 5">
    <h3>Producto 5</h3>
    <p>Descripción breve del producto 5.</p>
  </div>
  <div class="card" data-stock="20">
    <img src="https://via.placeholder.com/300x180.png?text=Producto+6" alt="Producto 6">
    <h3>Producto 6</h3>
    <p>Descripción breve del producto 6.</p>
  </div>
</div>

<script>
// ===================== FRASES SOCIALES =====================
const frasesSociales = [
  "{n} personas lo recomiendan",
  "{n} personas lo agregaron al carrito",
  "{n} lo compararon recientemente",
  "Vendido {n} veces este mes",
  "Última compra hace {n} minutos",
  "{n} personas lo están viendo ahora",
  "{n} personas lo marcaron como favorito",
  "En el top 100 de los más vendidos",
  "{n} clientes regresaron a comprarlo",
  "{n} preguntas recibidas sobre este producto",
  "{n} personas lo añadieron a su lista de deseos",
  "Más de {n} reseñas positivas"
];

// ===================== GENERADOR =====================
function generarFrasesProducto(card) {
  const frasesElegidas = [];

  // --- STOCK SIEMPRE ---
  let stock = parseInt(card.getAttribute("data-stock")) || 0;
  let textoStock = "";
  let svgStock = "";

  if (stock === 0) {
    textoStock = "Agotado 😢";
    svgStock = `<svg viewBox="24 24 24 24" fill="var(--danger)" width="16" height="16"><circle cx="12" cy="12" r="10"/></svg>`;
  } else if (stock <= 5) {
    textoStock = "Ultimas unidades" ;
    svgStock = `<svg viewBox="0 0 24 24" fill="var(--danger)" width="16" height="16"><path d="M1 21h22L12 2z"/></svg>`;
  } else if (stock <= 19) {
    textoStock =  "Disponibles por tiempo limitado";
    svgStock = `<svg viewBox="0 0 24 24" fill="var(--warn)" width="16" height="16"><circle cx="12" cy="12" r="10"/></svg>`;
  } else {
    textoStock = "Mas de 19 en Stock";
    svgStock = `<svg viewBox="0 0 24 24" fill="var(--ok)" width="16" height="16"><circle cx="12" cy="12" r="10"/></svg>`;
  }

  frasesElegidas.push({ texto: textoStock, svg: svgStock });

  // --- FRASES EXTRA (0 a 2) ---
  const cantidad = Math.floor(Math.random() * 3); // 0 a 2
  const pool = [...frasesSociales];

  for (let i = 0; i < cantidad; i++) {
    const idx = Math.floor(Math.random() * pool.length);
    let frase = pool[idx];
    pool.splice(idx, 1);

    const n = Math.floor(Math.random() * 200) + 1;
    frase = frase.replace("{n}", `<span class="num">${n}</span>`);

    frasesElegidas.push({ texto: frase, svg: "" });
  }

  return frasesElegidas;
}

// ===================== ACTUALIZACIÓN =====================
function actualizarNumero(numEl) {
  const nuevo = Math.floor(Math.random() * 200) + 1;
  numEl.textContent = nuevo;
  numEl.classList.add("cambio");
  setTimeout(() => numEl.classList.remove("cambio"), 500);

  const next = (Math.floor(Math.random() * 30) + 1) * 60000;
  setTimeout(() => actualizarNumero(numEl), next);
}

// ===================== INSERCIÓN =====================
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".card").forEach(card => {
    const statsDiv = document.createElement("div");
    statsDiv.className = "product-stats";

    const frasesFinales = generarFrasesProducto(card);
    frasesFinales.forEach(f => {
      const p = document.createElement("p");
      p.innerHTML = `${f.svg} <span>${f.texto}</span>`;
      const delay = (Math.random() * 0.8 + 0.2).toFixed(2);
      p.style.animationDelay = `${delay}s`;
      statsDiv.appendChild(p);
    });

    card.appendChild(statsDiv);
  });

  document.querySelectorAll(".product-stats .num").forEach(numEl => {
    const next = (Math.floor(Math.random() * 30) + 1) * 60000;
    setTimeout(() => actualizarNumero(numEl), next);
  });
});
</script>

</body>
</html>
